# Assignment3

```asm
siwen@DESKTOP-61TLL0I:/mnt/c/Users/Administrator/CLionProjects/comp343/A3$ tree
.
├── README.md
├── a3q1.c
├── makefile
└── tasks.txt

0 directories, 4 files
```

There are 4 files and the tasks.txt is generated by that .py file and contains 150 tasks.

## How to run my code

Use this command "**make**" like this :

```
siwen@DESKTOP-61TLL0I:/mnt/c/Users/Administrator/CLionProjects/comp343/A3$ make
clang -Wall -Wpedantic -Wextra -Werror -o a3q1 a3q1.c -lpthread
siwen@DESKTOP-61TLL0I:/mnt/c/Users/Administrator/CLionProjects/comp343/A3$
```

And then you could test my code like this

```asm
siwen@DESKTOP-61TLL0I:/mnt/c/Users/Administrator/CLionProjects/comp343/A3$ ./a3q1 4 5000 tasks.txt
sleep for delay
loading.....med_task_0
loading.....short_task_0
loading.....long_task_0
loading.....short_task_1
loading.....long_task_1
loading.....io_task_0
loading.....io_task_1
loading.....io_task_2
loading.....io_task_3
loading.....short_task_2
loading.....io_task_4
loading.....med_task_1
loading.....med_task_2
sleep for delay
loading.....med_task_3
.
.
.
.
.
.
loading.....long_task_35
loading.....long_task_36
loading.....med_task_43
loading.....io_task_29
loading.....long_task_37
loading.....long_task_38
loading.....med_task_44
loading.....long_task_39
loading.....long_task_40
loading.....med_task_45
load over

Using mlfq with 4 CPUs.

Average turnaround time per type:

        Type 0: 189883 usec
        Type 1: 697314 usec
        Type 2: 4636860 usec
        Type 3: 5028826 usec


Average response time per type:

        Type 0: 1728 usec
        Type 1: 2196 usec
        Type 2: 2858 usec
        Type 3: 2017 usec



Program completed normally.
siwen@DESKTOP-61TLL0I:/mnt/c/Users/Administrator/CLionProjects/comp343/A3$
```

## How to clean my code

Please run **"make clean"** like this:
It will be

```
siwen@DESKTOP-61TLL0I:/mnt/c/Users/Administrator/CLionProjects/comp343/A3$ make clean
rm -f a3q1
siwen@DESKTOP-61TLL0I:/mnt/c/Users/Administrator/CLionProjects/comp343/A3$
```

Enjoy them.

Thank you very much.

# Report(Ubuntu-20.04)

| CPU CORES <br/>-------------------- <br/>S(ms) | 1                                                                                                                                                                                                                                                                    | 2                                                                                                                                                                                                                                                                         | 4                                                                                                                                                                                                                                                                      | 8                                                                                                                                                                                                                                                            |
|:-----------------------------------------------|:---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 500                                            | Average turnaround time per type:<br/>Type 0: 1076877 usec<br/>Type 1: 3824042 usec<br/>Type 2: 25323482 usec<br/>Type 3: 28086615 usec<br/>Average response time per type:<br/>Type 0: 7728 usec<br/>Type 1: 9625 usec<br/>Type 2: 12463 usec<br/>Type 3: 9260 usec | Average turnaround time per type:<br/>Type 0: 470644 usec<br/>Type 1: 1606329 usec<br/>Type 2: 11737939 usec<br/>Type 3: 12600957 usec<br/>Average response time per type:<br/>Type 0: 3736 usec<br/>Type 1: 4689 usec<br/>Type 2: 6080 usec<br/>Type 3: 4367 usec        | Average turnaround time per type:<br/>Type 0: 192723 usec<br/>Type 1: 697072 usec<br/>Type 2: 4630896 usec<br/>Type 3: 5241944 usec<br/>Average response time per type:<br/>Type 0: 1706 usec<br/>Type 1: 2197 usec<br/>Type 2: 2871 usec<br/>Type 3: 1984 usec        | Average turnaround time per type:<br/>Type 0: 79068 usec<br/>Type 1: 258701 usec<br/>Type 2: 1727488 usec<br/>Type 3: 1742752 usec<br/>Average response time per type:<br/>Type 0: 679 usec<br/>Type 1: 920 usec<br/>Type 2: 1120 usec<br/>Type 3: 851 usec  |
| 2000                                           | Average turnaround time per type:<br/>Type 0: 1040383 usec<br/>Type 1: 3754648 usec<br/>Type 2: 24861422 usec<br/>Type 3: 28138945 usec<br/>Average response time per type:<br/>Type 0: 7754 usec<br/>Type 1: 9640 usec<br/>Type 2: 12475 usec<br/>Type 3: 9271 usec | Average turnaround time per type:<br/>Type 0: 436912 usec<br/>Type 1: 1565199 usec<br/>Type 2: 11545551 usec<br/>Type 3: 13121039 usec<br/>Average response time per type:<br/>Type 0: 3697 usec<br/>Type 1: 4702 usec<br/>Type 2: 6079 usec<br/>Type 3: 4400 usec        | Average turnaround time per type:<br/>Type 0: 192339 usec<br/>Type 1: 695527 usec<br/>Type 2: 4613220 usec<br/>Type 3: 5004187 usec<br/>Average response time per type:<br/>Type 0: 1672 usec<br/>Type 1: 2171 usec<br/>Type 2: 2810 usec<br/>Type 3: 1969 usec        | Average turnaround time per type:<br/>Type 0: 78613 usec<br/>Type 1: 259175 usec<br/>Type 2: 1726850 usec<br/>Type 3: 1752976 usec<br/>Average response time per type:<br/>Type 0: 656 usec<br/>Type 1: 935 usec<br/>Type 2: 1217 usec<br/>Type 3: 821 usec  |
| 5000                                           | Average turnaround time per type:<br/>Type 0: 1079817 usec<br/>Type 1: 3710594 usec<br/>Type 2: 24657757 usec<br/>Type 3: 28245594 usec<br/>Average response time per type:<br/>Type 0: 7847 usec<br/>Type 1: 9789 usec<br/>Type 2: 12659 usec<br/>Type 3: 9383 usec | Average turnaround time per type:<br/>Type 0: 448671 usec<br/>Type 1: 1522529 usec<br/>Type 2: 11492628 usec<br/>Type 3: 13142170 usec<br/>Average response time per type:<br/>Type 0: 3738 usec<br/>Type 1: 4650 usec<br/>Type 2: 6041 usec<br/>Type 3: 4409 usec        | Average turnaround time per type:<br/>Type 0: 188281 usec<br/>Type 1: 690762 usec<br/>Type 2: 4612526 usec<br/>Type 3: 5274796 usec<br/>Average response time per type:<br/>Type 0: 1671 usec<br/>Type 1: 2187 usec<br/>Type 2: 2874 usec<br/>Type 3: 2004 usec        | Average turnaround time per type:<br/>Type 0: 78654 usec<br/>Type 1: 259291 usec<br/>Type 2: 1734317 usec<br/>Type 3: 1760687 usec<br/>Average response time per type:<br/>Type 0: 635 usec<br/>Type 1: 948 usec<br/>Type 2: 1209 usec<br/>Type 3: 824 usec  |
| 10000                                          | Average turnaround time per type:<br/>Type 0: 1036671 usec<br/>Type 1: 3673007 usec<br/>Type 2: 24685851 usec<br/>Type 3: 28236889 usec<br/>Average response time per type:<br/>Type 0: 7799 usec<br/>Type 1: 9730 usec<br/>Type 2: 12605 usec<br/>Type 3: 9343 usec | Average turnaround time per type:<br/>Type 0: 465173 usec<br/>Type 1: 1527124 usec<br/>Type 2: 11447737 usec<br/>Type 3: 13069082 usec<br/>Average response time per type:<br/>Type 0: 3716 usec<br/>Type 1: 4693 usec<br/>Type 2: 6045 usec<br/>Type 3: 4448 usec        | Average turnaround time per type:<br/>Type 0: 195164 usec<br/>Type 1: 694958 usec<br/>Type 2: 4649035 usec<br/>Type 3: 5286174 usec<br/>Average response time per type:<br/>Type 0: 1707 usec<br/>Type 1: 2199 usec<br/>Type 2: 2858 usec<br/>Type 3: 1992 usec        | Average turnaround time per type:<br/>Type 0: 79814 usec<br/>Type 1: 257838 usec<br/>Type 2: 1731813 usec<br/>Type 3: 1755363 usec<br/>Average response time per type:<br/>Type 0: 685 usec<br/>Type 1: 915 usec<br/>Type 2: 1216 usec<br/>Type 3: 874 usec  |

**Questions**

1. Is the difference in turnaround time and response time you expected to see as S and the number of CPUs change? Why or
   why not?

Yes. By the table above: we could see that all times were becoming shorter with increasing CPUs or S. When the number of
cpu increases, the performance gets improvement. So the time became shorter. But for the S. I think the reason is the
long tasks have more chances to be executed.

2. How does adjusting the S value in the system affect the turnaround time or response time for long-running tasks? Does
   it appear to be highly correlated?

Yes, it affects but appears not to be very highly correlated. For my test, when I increase S, the turnaround time and
response time decrease first and then increase. If I continue to increase the S, the long-tasks will starve. I think if
I test my code with millions of tasks, it will be more obvious.
